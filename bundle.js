(()=>{function A(){let e=document.createElement("div");e.classList.add("square");let t=f();return e.append(t),e}function f(e="circle"){let t=document.createElement("img");return t.classList.add("icon"),t.setAttribute("alt","Game icon"),m(t,e),t}function m(e,t){e.setAttribute("src",`assets/${t}.svg`)}function w(e,t,n){e.addEventListener("click",()=>{e.classList.add("chosen"),n(t)})}function v(e,t){let n=document.querySelector(".game-area");e.forEach(s=>{let a=A();w(a,s,t),n.append(a)})}function p(e){let t=document.querySelector(".players");Object.values(e).forEach(n=>{let s=document.createElement("div"),a=document.createElement("div");a.textContent=`Player ${n.name}`;let L=f(n.side.toLowerCase());s.append(a,L),s.classList.add("player",`player-${n.name.toLowerCase()}`),t.append(s)})}function E(e){document.querySelectorAll(".square:not(.chosen) .icon").forEach(n=>{m(n,e.toLowerCase())})}function y({name:e,side:t}){document.querySelectorAll(".player").forEach(a=>a.classList.remove("has-turn")),document.querySelector(`.player-${e.toLowerCase()}`).classList.add("has-turn"),E(t)}function h(){document.querySelector(".game-area").classList.add("inactive")}function i(e){let t=document.querySelector(".toast");t.textContent=e,t.classList.remove("hidden"),setTimeout(()=>{t.classList.add("hidden")},5e3)}var d=["CIRCLE","CROSS"],o={},l=null,r=[],u=null;function q(e){let t={name:e,side:null};return{get name(){return e},get side(){return t.side},set side(n){t.side=n}}}function T(){let e={value:null};return{get value(){return e.value},set value(t){e.value=t}}}function P(){let e=[];for(let t=0;t<9;t++){let n=T();e.push(n)}return e}function b(){return r.filter(e=>e.value===null).length===0}function c(e,t,n){return e===t&&t===n&&![e,t,n].includes(null)}function S(){let e=!1;for(let t=0;t<=6;t+=3)c(r[t].value,r[t+1].value,r[t+1*2].value)&&(e=!0);for(let t=0;t<3;t++)c(r[t].value,r[t+3].value,r[t+3*2].value)&&(e=!0);return c(r[0].value,r[4].value,r[8].value)&&(e=!0),c(r[2].value,r[4].value,r[6].value)&&(e=!0),e}function G(){return b()||S()}function j(){let e=Math.floor(Math.random()*d.length);o.one.side=d.splice(e,1)[0],o.two.side=d.pop()}function O(){u===Object.values(o).length-1?u=0:u++,g()}function g(){l=Object.values(o)[u],y(l)}function I(e){if(e.value=l.side,G()){S()?i(`Player ${l.name} has won, refresh to restart`):i("All squares have been chosen, refresh to restart"),h();return}O()}function $(){o={one:q("One"),two:q("Two")},r=P(),j(),u=0}function C(){$(),v(r,I),p(o),g()}C();})();
